<div class="p-4 sm:ml-64">
    <div class="p-4 border-2 border-gray-200 border-dashed rounded-lg dark:border-gray-700">
        <h1 class="text-2xl lato-bold mb-7">Tableau de bord - <span class="underline">Liste des lignes de commandes</span></h1>
        
        <ng-container *ngIf="currentPageData$ | async as orderLines">
            
            @for (orderLine of orderLines; track orderLine ) {
                <div class="h-48-md mb-4 p-4 flex flex-col md:flex-row gap-2 rounded bg-gray-50 dark:bg-gray-800">
                    <div class="md:w-1/3 w-100">
                        <h3 class="bg-yellow-var rounded-md w-fit px-1 text-brown text-sm lato-bold mb-1">Ref cde N°{{ orderLine.main_order.id }}</h3>
                        <p class="bg-yellow-var rounded-md w-fit px-1 text-brown text-sm lato-bold">- {{ orderLine.main_order.date| date:'dd/MM/yyyy' }} -</p>
                        <p *ngIf="orderLine.employee" class="text-brown text-sm lato-bold"><span class="underline">Employé</span>: 
                            {{ orderLine.employee.firstname }}    
                        </p>
                        <p *ngIf="!orderLine.employee" class="text-brown text-sm lato-bold">
                            Commande non attribuée
                        </p>
                    </div>
                    <div class="md:w-1/3 w-100">
                        <p class="text-brown text-base lato-bold">Détails</p>
                        <p class="text-brown text-sm lato-bold"><span class="underline">Prestation</span>: 
                            {{ orderLine.prestation.name }}    
                        </p>
                        <p class="text-brown text-sm lato-bold"><span class="underline">Article</span>: 
                            {{ orderLine.product.name }}
                        </p>
                        <p class="text-brown text-sm lato-bold"><span class="underline">Quantité</span>: 
                            {{ orderLine.qty }}    
                        </p>
                    </div>
                    <hr class="md:hidden">
                    <div class="md:w-1/3 w-100 flex-column">
                        <p class="text-brown text-base text-right lato-bold mb-2">Commande</p>
                        <div class="mb-4 flex justify-end">
                            <a class="focus:outline-none btn-cta rounded-lg lato-bold text-sm p-2 me-2 mb-2 dark:focus:ring-yellow-900">Voir la commande</a>
                        </div>
                        <p class="text-brown text-sm text-center lato-bold"><span class="underline">Statut</span>: 
                            {{ orderLine.order_line_status.name }}    
                        </p>
                    </div>
                </div>
            }

            <div class="mx-auto flex justify-center w-2/3">

                <button type="button" *ngIf="currentPage$.value > 1" class="focus:outline-none btn-cta rounded-lg lato-bold px-5 py-1.5 me-2 mb-2 dark:focus:ring-yellow-900" (click)="prevPage()"><</button>

                <button type="button" class="focus:outline-none btn-cta rounded-lg lato-bold px-5 py-1.5 me-2 mb-2 dark:focus:ring-yellow-900" (click)="nextPage()">></button>

            </div>
        </ng-container>
 
        
    </div>
 </div>

